<div
  class="min-h-screen bg-gradient-to-br from-background to-muted flex items-center justify-center p-4 sm:p-6 lg:p-8 relative"
>
  <!-- Language Picker in top-right corner -->
  <div class="absolute top-6 right-6 z-10">
    <app-lang-picker
      class="min-w-[48px] min-h-[48px] flex items-center justify-center"
    ></app-lang-picker>
  </div>
  <app-grid [cols]="1" gap="3rem" class="w-full max-w-md">
    <!-- Header Section -->
    <div class="text-center space-y-8">
      <div
        class="mx-auto h-12 w-12 flex items-center justify-center rounded-2xl bg-gradient-to-br from-primary to-accent shadow-2xl transform hover:scale-105 transition-transform duration-200"
      >
        <z-icon zType="user-plus" zSize="xl" class="text-white min-w-[48px] min-h-[48px]"></z-icon>
      </div>
      <div class="space-y-4">
        <h1 class="text-4xl font-bold text-foreground tracking-tight">
          {{ 'auth.createAccount' | translate }}
        </h1>
        <p class="text-xl text-muted-foreground font-medium">
          {{ 'auth.joinUs' | translate }}
        </p>
        <!-- V2 Authentication Indicator -->
        <div
          class="flex items-center justify-center gap-2 px-4 py-3 bg-primary/10 border border-primary/20 rounded-lg min-h-[44px] cursor-pointer"
        >
          <z-icon
            zType="shield"
            size="sm"
            class="text-primary text-xl min-w-[48px] min-h-[48px]"
          ></z-icon>
          <span class="text-sm font-medium text-primary min-h-[48px] flex items-center">
            Enterprise Security Enabled
          </span>
        </div>
      </div>
    </div>

    <!-- Register Form Card -->
    <div
      class="rounded-2xl border bg-card text-card-foreground shadow-xl border-border backdrop-blur-sm"
    >
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="p-8 space-y-8">
        <!-- Name Field -->
        <div class="space-y-4">
          <label
            z-label
            for="name"
            class="flex items-center gap-2 py-3 min-h-[44px] cursor-pointer"
          >
            <z-icon zType="user" zSize="sm" class="text-xl min-w-[48px] min-h-[48px]"></z-icon>
            {{ 'auth.name' | translate }}
          </label>
          <input
            z-input
            id="name"
            name="name"
            type="text"
            formControlName="name"
            required
            placeholder="{{ 'auth.namePlaceholder' | translate }}"
            aria-label="Full name"
            aria-describedby="name-error"
            [aria-invalid]="registerForm.get('name')?.invalid && registerForm.get('name')?.touched"
            [attr.data-invalid]="
              registerForm.get('name')?.invalid && registerForm.get('name')?.touched
            "
            class="autofill:!bg-muted autofill:!text-foreground"
          />
          @if (registerForm.get('name')?.invalid && registerForm.get('name')?.touched) {
            <div
              id="name-error"
              class="text-sm text-destructive flex items-center gap-2 py-1"
              role="alert"
              aria-live="polite"
            >
              <z-icon
                zType="circle-alert"
                zSize="sm"
                class="text-destructive min-w-[48px] min-h-[48px]"
              ></z-icon>
              <span>{{ 'auth.nameRequired' | translate }}</span>
            </div>
          }
        </div>

        <!-- Email Field -->
        <div class="space-y-4">
          <label
            z-label
            for="email"
            class="flex items-center gap-2 py-3 min-h-[44px] cursor-pointer"
          >
            <z-icon zType="mail" zSize="sm" class="text-xl min-w-[48px] min-h-[48px]"></z-icon>
            {{ 'auth.email' | translate }}
          </label>
          <input
            z-input
            id="email"
            name="email"
            type="email"
            formControlName="email"
            required
            email
            placeholder="{{ 'auth.emailPlaceholder' | translate }}"
            aria-label="Email address"
            aria-describedby="email-error"
            [aria-invalid]="
              registerForm.get('email')?.invalid && registerForm.get('email')?.touched
            "
            [attr.data-invalid]="
              registerForm.get('email')?.invalid && registerForm.get('email')?.touched
            "
            class="autofill:!bg-muted autofill:!text-foreground"
          />
          @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
            <div
              id="email-error"
              class="text-sm text-destructive flex items-center gap-2 py-1"
              role="alert"
              aria-live="polite"
            >
              <z-icon
                zType="circle-alert"
                zSize="sm"
                class="text-destructive min-w-[48px] min-h-[48px]"
              ></z-icon>
              <span>{{
                registerForm.get('email')?.errors?.['required']
                  ? ('auth.emailRequired' | translate)
                  : ('auth.emailInvalid' | translate)
              }}</span>
            </div>
          }
        </div>

        <!-- Password Field -->
        <div class="space-y-4">
          <label
            z-label
            for="password"
            class="flex items-center gap-2 py-3 min-h-[44px] cursor-pointer"
          >
            <z-icon zType="lock" zSize="sm" class="text-xl min-w-[48px] min-h-[48px]"></z-icon>
            {{ 'auth.password' | translate }}
          </label>
          <input
            z-input
            id="password"
            name="password"
            type="password"
            formControlName="password"
            required
            placeholder="{{ 'auth.passwordPlaceholder' | translate }}"
            aria-label="Password"
            aria-describedby="password-error"
            [aria-invalid]="
              registerForm.get('password')?.invalid && registerForm.get('password')?.touched
            "
            [attr.data-invalid]="
              registerForm.get('password')?.invalid && registerForm.get('password')?.touched
            "
            class="autofill:!bg-muted autofill:!text-foreground"
          />
          @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <div
              id="password-error"
              class="text-sm text-destructive flex items-center gap-2 py-1"
              role="alert"
              aria-live="polite"
            >
              <z-icon
                zType="circle-alert"
                zSize="sm"
                class="text-destructive min-w-[48px] min-h-[48px]"
              ></z-icon>
              <span>{{
                registerForm.get('password')?.errors?.['required']
                  ? ('auth.passwordRequired' | translate)
                  : ('auth.passwordMinLength' | translate)
              }}</span>
            </div>
          }
        </div>

        <!-- Error Message -->
        @if (errorMessage) {
          <div
            class="relative w-full rounded-lg border border-destructive/50 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-destructive"
            id="register-error"
            role="alert"
            aria-live="assertive"
          >
            <z-icon zType="circle-alert" class="h-4 w-4 min-w-[48px] min-h-[48px]"></z-icon>
            <h4 class="mb-1 font-medium leading-none tracking-tight text-destructive">
              {{ 'auth.registrationError' | translate }}
            </h4>
            <div class="text-sm [&_p]:leading-relaxed text-destructive/90">
              {{ errorMessage }}
            </div>
          </div>
        }

        <!-- V2 Security Notice -->
        <div
          class="flex items-center gap-4 px-4 py-4 bg-primary/5 border border-primary/20 rounded-lg min-h-[48px] cursor-pointer"
        >
          <z-icon zType="shield" class="text-primary text-xl min-w-[48px] min-h-[48px]"></z-icon>
          <div class="flex-1 min-h-[48px] flex flex-col justify-center">
            <p class="text-sm font-medium text-primary min-h-[48px] flex items-center">
              Secure Registration
            </p>
            <p class="text-sm text-muted-foreground min-h-[48px] flex items-center">
              Device fingerprint and session binding enabled
            </p>
          </div>
        </div>

        <!-- Submit Button -->
        <z-button
          type="submit"
          size="lg"
          variant="default"
          class="w-full h-12 text-base font-semibold shadow-lg hover:shadow-xl min-h-[44px] disabled:!bg-muted disabled:!text-muted-foreground"
          [loading]="registerForm.pending"
          [disabled]="registerForm.invalid"
          [attr.aria-describedby]="errorMessage ? 'register-error' : null"
          aria-label="{{ 'auth.createAccount' | translate }}"
        >
          @if (!registerForm.pending) {
            <z-icon zType="user-plus" class="mr-2 text-xl min-w-[48px] min-h-[48px]"></z-icon>
          }
          @if (registerForm.pending) {
            <z-icon
              zType="refresh-ccw"
              class="animate-spin mr-2 text-xl min-w-[48px] min-h-[48px]"
            ></z-icon>
          }
          <span>{{ 'auth.createAccount' | translate }}</span>
        </z-button>
      </form>

      <!-- Separator -->
      <div class="relative my-8">
        <div class="absolute inset-0 flex items-center">
          <span class="w-full border-t border-border h-[44px]"></span>
        </div>
        <div class="relative flex justify-center text-sm uppercase py-2">
          <span class="bg-card px-4 text-muted-foreground font-medium">{{
            'common.or' | translate
          }}</span>
        </div>
      </div>

      <!-- Login Link -->
      <div class="text-center min-h-[48px] flex items-center justify-center">
        <p class="text-sm text-muted-foreground">
          {{ 'auth.haveAccount' | translate }}
          <button
            z-button
            variant="link"
            type="button"
            [routerLink]="'/auth/login'"
            class="px-3 py-2 font-semibold text-primary hover:text-primary/80 transition-colors min-h-[48px] min-w-[48px] flex items-center justify-center"
          >
            {{ 'auth.signIn' | translate }}
          </button>
        </p>
      </div>
    </div>
  </app-grid>
</div>
